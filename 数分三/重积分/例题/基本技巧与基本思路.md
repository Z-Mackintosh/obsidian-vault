# 例题
$$ \iint_{a_{b}}y\mathrm{d}x\mathrm{d}y,\text{其中 }D\text{ 是由直线 }x=-2,y=0,y=2,\text{以及曲线 }x=-\sqrt{2y-y^2}\text{所围}\\\text{的区域;}$$
# 解答

## 基本技巧
### 1. 分析积分区域

给定的重积分为 $\iint_D y \,dx\,dy$。

积分区域 $D$ 由以下四条曲线围成：
*   直线 $x = -2$
*   直线 $y = 0$
*   直线 $y = 2$
*   曲线 $x = -\sqrt{2y - y^2}$

我们来分析曲线 $x = -\sqrt{2y - y^2}$。
对该方程两边平方，得到 $x^2 = 2y - y^2$。
整理后可得 $x^2 + y^2 - 2y = 0$。
通过配方法，我们得到 $(x-0)^2 + (y-1)^2 = 1^2$。
这是一个圆心在 $(0, 1)$，半径为 $1$ 的圆。

由于原始方程是 $x = -\sqrt{2y - y^2}$，这意味着 $x \le 0$。因此，这条曲线代表了圆在 $y$ 轴左侧的半圆部分。

综上所述，积分区域 $D$ 是由直线 $x = -2$、 $y=0$、 $y=2$ 以及半圆弧 $x = -\sqrt{2y - y^2}$ 所围成的区域。

### 2. 选择坐标系并建立积分

对于这个区域，如果我们将积分顺序定为先对 $x$ 积分，再对 $y$ 积分，会比较方便。这种方法称为使用**直角坐标系**。

积分区域 $D$ 可以用不等式表示为：
$D = \{(x, y) \mid 0 \le y \le 2, -2 \le x \le -\sqrt{2y - y^2}\}$

因此，重积分可以写成一个二次积分：
$$ \iint_D y \,dx\,dy = \int_{0}^{2} \left( \int_{-2}^{-\sqrt{2y - y^2}} y \,dx \right) dy $$

### 3. 计算积分

**第一步：计算内层关于 $x$ 的积分**

$$ \int_{-2}^{-\sqrt{2y - y^2}} y \,dx = y \left[ x \right]_{-2}^{-\sqrt{2y - y^2}} $$
$$ = y \left( -\sqrt{2y - y^2} - (-2) \right) $$
$$ = 2y - y\sqrt{2y - y^2} $$

**第二步：计算外层关于 $y$ 的积分**

现在我们需要计算：
$$ \int_{0}^{2} (2y - y\sqrt{2y - y^2}) \,dy $$
这个积分可以拆分为两部分：
$$ \int_{0}^{2} 2y \,dy - \int_{0}^{2} y\sqrt{2y - y^2} \,dy $$

*   **计算第一部分：**
    $$ \int_{0}^{2} 2y \,dy = \left[ y^2 \right]_{0}^{2} = 2^2 - 0^2 = 4 $$

*   **计算第二部分：**
    对于积分 $\int_{0}^{2} y\sqrt{2y - y^2} \,dy$，我们使用三角换元法。
    令 $y - 1 = \sin(t)$，则 $y = 1 + \sin(t)$，并且 $dy = \cos(t) \,dt$。
    我们还需要更新积分的上下限：
    *   当 $y = 0$ 时, $\sin(t) = -1$, 所以 $t = -\frac{\pi}{2}$。
    *   当 $y = 2$ 时, $\sin(t) = 1$, 所以 $t = \frac{\pi}{2}$。

    根号内的表达式变为：
    $2y - y^2 = 1 - (y-1)^2 = 1 - \sin^2(t) = \cos^2(t)$。
    因为 $t$ 的范围是 $[-\frac{\pi}{2}, \frac{\pi}{2}]$，在这个区间内 $\cos(t) \ge 0$，所以 $\sqrt{\cos^2(t)} = \cos(t)$。

    将换元后的表达式代入积分：
    $$ \int_{-\pi/2}^{\pi/2} (1 + \sin(t)) \cos(t) \cdot \cos(t) \,dt $$
    $$ = \int_{-\pi/2}^{\pi/2} (\cos^2(t) + \sin(t)\cos^2(t)) \,dt $$
    $$ = \int_{-\pi/2}^{\pi/2} \cos^2(t) \,dt + \int_{-\pi/2}^{\pi/2} \sin(t)\cos^2(t) \,dt $$

    *   计算 $\int_{-\pi/2}^{\pi/2} \cos^2(t) \,dt$：
        使用降幂公式 $\cos^2(t) = \frac{1 + \cos(2t)}{2}$。
        $$ \int_{-\pi/2}^{\pi/2} \frac{1 + \cos(2t)}{2} \,dt = \frac{1}{2} \left[ t + \frac{1}{2}\sin(2t) \right]_{-\pi/2}^{\pi/2} $$
        $$ = \frac{1}{2} \left[ \left(\frac{\pi}{2} + 0\right) - \left(-\frac{\pi}{2} + 0\right) \right] = \frac{1}{2} (\pi) = \frac{\pi}{2} $$

    *   计算 $\int_{-\pi/2}^{\pi/2} \sin(t)\cos^2(t) \,dt$：
        被积函数 $f(t) = \sin(t)\cos^2(t)$ 是一个奇函数（因为 $f(-t) = \sin(-t)\cos^2(-t) = -\sin(t)\cos^2(t) = -f(t)$），它在对称区间 $[-\frac{\pi}{2}, \frac{\pi}{2}]$ 上的积分为 $0$。

    因此，第二部分的积分为 $\frac{\pi}{2} + 0 = \frac{\pi}{2}$。

**第三步：合并结果**

将两部分的结果合并，得到最终答案：
$$ \int_{0}^{2} (2y - y\sqrt{2y - y^2}) \,dy = 4 - \frac{\pi}{2} $$

所以，该重积分的计算结果是 **$4 - \frac{\pi}{2}$**。

## 基本思路
### 解法思路：区域分割法 (续)

这种方法的核心思想是，将复杂的积分区域 $D$ 看作是一个简单的矩形区域 $R$ 减去一个多余的区域 $D_2$。

1.  **定义一个更大的、简单的区域 $R$**：
    我们定义一个矩形区域 $R$，它由直线 $x=-2, x=0, y=0, y=2$ 围成。
    $R = \{(x, y) \mid -2 \le x \le 0, 0 \le y \le 2\}$

2.  **定义需要减去的区域 $D_2$**：
    我们观察到，目标区域 $D$ 是在矩形 $R$ 的基础上，挖去了由半圆弧 $x = -\sqrt{2y - y^2}$ 右侧、直线 $x=-2$ 左侧所夹的部分。但更简单的方法是，定义 $D_2$ 为矩形 $R$ 内部，但在半圆弧 $x = -\sqrt{2y - y^2}$ 右侧的区域。
    $D_2 = \{(x, y) \mid -\sqrt{2y - y^2} < x \le 0, 0 \le y \le 2\}$
    这个区域 $D_2$ 实际上就是我们之前分析过的，圆心在 $(0,1)$、半径为 $1$ 的圆在 $y$ 轴左侧的半圆。

3.  **建立积分关系**：
    根据积分的可加性，在矩形区域 $R$ 上的积分等于在区域 $D$ 和区域 $D_2$ 上的积分之和：
    $$ \iint_R y \,dx\,dy = \iint_D y \,dx\,dy + \iint_{D_2} y \,dx\,dy $$
    因此，我们要求的积分可以表示为：
    $$ \iint_D y \,dx\,dy = \iint_R y \,dx\,dy - \iint_{D_2} y \,dx\,dy $$

### 分步计算

**第一步：计算矩形区域 $R$ 上的积分**

这个积分非常直接，因为积分限都是常数：
$$ \iint_R y \,dx\,dy = \int_{-2}^{0} dx \int_{0}^{2} y \,dy $$
$$ = \int_{-2}^{0} \left[ \frac{1}{2}y^2 \right]_{0}^{2} dx = \int_{-2}^{0} 2 \,dx $$
$$ = \left[ 2x \right]_{-2}^{0} = 0 - (-4) = 4 $$

**第二步：计算半圆区域 $D_2$ 上的积分**

区域 $D_2$ 是一个半圆：$x^2 + (y-1)^2 \le 1$ 且 $x \le 0$。由于其边界是圆弧，使用**极坐标**计算最为方便。

我们使用标准的极坐标变换：
*   $x = r\cos\theta$
*   $y = r\sin\theta$
*   $dx\,dy = r\,dr\,d\theta$

现在确定 $r$ 和 $\theta$ 的范围：
*   **$\theta$ 的范围**：区域 $D_2$ 在 $x \le 0$ 的部分，对应于第二和第三象限，所以 $\theta$ 从 $\frac{\pi}{2}$ 到 $\frac{3\pi}{2}$。
*   **$r$ 的范围**：我们将极坐标代入圆的方程 $x^2 + y^2 - 2y = 0$：
    $(r\cos\theta)^2 + (r\sin\theta)^2 - 2(r\sin\theta) = 0$
    $r^2 - 2r\sin\theta = 0$
    $r(r - 2\sin\theta) = 0$
    解得 $r=0$ 或 $r = 2\sin\theta$。所以 $r$ 的范围是从 $0$ 到 $2\sin\theta$。
>  在看一下上面确定 $r,\theta$ 的范围的步骤

现在建立 $D_2$ 上的积分：
$$ \iint_{D_2} y \,dx\,dy = \int_{\pi/2}^{3\pi/2} \int_{0}^{2\sin\theta} (r\sin\theta) \cdot r \,dr\,d\theta $$
$$ = \int_{\pi/2}^{3\pi/2} \sin\theta \left( \int_{0}^{2\sin\theta} r^2 \,dr \right) d\theta $$
$$ = \int_{\pi/2}^{3\pi/2} \sin\theta \left[ \frac{r^3}{3} \right]_{0}^{2\sin\theta} d\theta $$
$$ = \int_{\pi/2}^{3\pi/2} \sin\theta \cdot \frac{8\sin^3\theta}{3} d\theta = \frac{8}{3} \int_{\pi/2}^{3\pi/2} \sin^4\theta \,d\theta $$

由于 $\sin^4\theta$ 是一个偶函数，且关于 $\theta=\pi$ 对称，我们可以简化积分区间：
$$ \frac{8}{3} \int_{\pi/2}^{3\pi/2} \sin^4\theta \,d\theta = \frac{8}{3} \cdot 2 \int_{\pi/2}^{\pi} \sin^4\theta \,d\theta $$
进一步利用对称性 $\sin(\pi - \alpha) = \sin(\alpha)$，可以得到：
$$ \int_{\pi/2}^{\pi} \sin^4\theta \,d\theta = \int_{0}^{\pi/2} \sin^4\theta \,d\theta $$
所以，积分变为：
$$ \frac{8}{3} \cdot 2 \int_{0}^{\pi/2} \sin^4\theta \,d\theta $$

使用[[华里士公式]] (Wallis' formula) $\int_{0}^{\pi/2} \sin^n\theta \,d\theta = \frac{(n-1)!!}{n!!} \cdot \frac{\pi}{2}$ (当 n 为偶数时):
$$ \int_{0}^{\pi/2} \sin^4\theta \,d\theta = \frac{3 \cdot 1}{4 \cdot 2} \cdot \frac{\pi}{2} = \frac{3\pi}{16} $$
所以，
$$ \iint_{D_2} y \,dx\,dy = \frac{8}{3} \cdot \frac{3\pi}{8} = \frac{\pi}{2} $$


**第三步：合并结果**

$$ \iint_D y \,dx\,dy = \iint_R y \,dx\,dy - \iint_{D_2} y \,dx\,dy = 4 - \frac{\pi}{2} $$
