# 极坐标替换：圆心不在原点的情况

## 基本概念

当积分区域的边界是圆，但圆心不在原点时，直接使用标准极坐标 $x = r\cos\theta$, $y = r\sin\theta$ 会导致边界方程变得复杂。这种情况下，我们需要采用特殊的处理方法。

## 方法一：平移变换 + 极坐标

### 思路
1. 先将坐标系平移到圆心位置
2. 在新的坐标系中使用标准极坐标
3. 计算雅可比行列式

### 一般步骤
设圆的方程为 $(x-a)^2 + (y-b)^2 = R^2$，圆心在 $(a,b)$，半径为 $R$。

1. **平移变换**：
   $$u = x - a, \quad v = y - b$$
   此时圆的方程变为：$u^2 + v^2 = R^2$

2. **极坐标变换**：
   $$u = r\cos\theta, \quad v = r\sin\theta$$
   其中 $0 \le r \le R$，$0 \le \theta \le 2\pi$

3. **雅可比行列式**：
   $$\frac{\partial(x,y)}{\partial(r,\theta)} = \frac{\partial(x,y)}{\partial(u,v)} \cdot \frac{\partial(u,v)}{\partial(r,\theta)} = 1 \cdot r = r$$

4. **积分变换**：
   $$\iint_D f(x,y)\,dxdy = \int_0^{2\pi} \int_0^R f(a+r\cos\theta, b+r\sin\theta) \cdot r\,drd\theta$$

## 方法二：直接极坐标变换

### 思路
直接使用极坐标 $x = r\cos\theta$, $y = r\sin\theta$，但需要确定 $r$ 的范围。

### 一般步骤
对于圆 $(x-a)^2 + (y-b)^2 = R^2$：

1. **代入极坐标**：
   $$(r\cos\theta - a)^2 + (r\sin\theta - b)^2 = R^2$$
   $$r^2 - 2r(a\cos\theta + b\sin\theta) + (a^2+b^2-R^2) = 0$$

2. **解出 $r$ 的范围**：
   这是一个关于 $r$ 的二次方程，解为：
   $$r = a\cos\theta + b\sin\theta \pm \sqrt{R^2 - (a\sin\theta - b\cos\theta)^2}$$
   通常取 $r$ 从 $r_1(\theta)$ 到 $r_2(\theta)$

3. **确定 $\theta$ 的范围**：
   需要满足 $r \ge 0$，即：
   $$a\cos\theta + b\sin\theta \ge -\sqrt{R^2 - (a\sin\theta - b\cos\theta)^2}$$

## 典型例题

### 例题1：圆心在 $(\frac{1}{2}, 0)$

**题目**：计算 $\iint_D \sqrt{x}\,dxdy$，其中 $D$ 由 $x^2 + y^2 = x$ 围成。

**解法**：
1. 圆的方程：$(x-\frac{1}{2})^2 + y^2 = (\frac{1}{2})^2$
2. 极坐标变换：$x = r\cos\theta$, $y = r\sin\theta$
3. 边界方程：$r^2 = r\cos\theta \Rightarrow r = \cos\theta$
4. 积分限：$0 \le r \le \cos\theta$, $-\frac{\pi}{2} \le \theta \le \frac{\pi}{2}$
5. 积分：$\int_{-\pi/2}^{\pi/2} \int_0^{\cos\theta} \sqrt{r\cos\theta} \cdot r\,drd\theta$

### 例题2：圆心在 $(\frac{1}{2}, \frac{1}{2})$

**题目**：计算 $\iint_D (x+y)\,dxdy$，其中 $D$ 由 $x^2 + y^2 = x+y$ 围成。

**解法**：
1. 圆的方程：$(x-\frac{1}{2})^2 + (y-\frac{1}{2})^2 = (\frac{\sqrt{2}}{2})^2$
2. 极坐标变换：$x = r\cos\theta$, $y = r\sin\theta$
3. 边界方程：$r^2 = r(\cos\theta+\sin\theta) \Rightarrow r = \cos\theta+\sin\theta$
4. 积分限：$0 \le r \le \cos\theta+\sin\theta$, $-\frac{\pi}{4} \le \theta \le \frac{3\pi}{4}$
5. 积分：$\int_{-\pi/4}^{3\pi/4} \int_0^{\cos\theta+\sin\theta} r(\cos\theta+\sin\theta) \cdot r\,drd\theta$

## 重要技巧

### 1. 辅助角公式
当边界方程为 $r = A\cos\theta + B\sin\theta$ 时，使用：
$$A\cos\theta + B\sin\theta = \sqrt{A^2+B^2}\sin(\theta+\phi)$$
其中 $\phi = \arctan(\frac{A}{B})$

### 2. 对称性利用
- 如果被积函数关于 $x$ 轴或 $y$ 轴对称，可以简化积分区间
- 如果被积函数是奇函数，在对称区间上的积分为零

### 3. 角度范围确定
通过分析 $r \ge 0$ 的条件来确定 $\theta$ 的范围：
- 对于 $r = \cos\theta$：$\cos\theta \ge 0 \Rightarrow -\frac{\pi}{2} \le \theta \le \frac{\pi}{2}$
- 对于 $r = \cos\theta+\sin\theta$：$\cos\theta+\sin\theta \ge 0 \Rightarrow -\frac{\pi}{4} \le \theta \le \frac{3\pi}{4}$

## 总结

当圆心不在原点时，极坐标变换的关键是：
1. 准确确定边界曲线的极坐标方程
2. 正确确定 $r$ 和 $\theta$ 的积分范围
3. 充分利用对称性和三角函数恒等式简化计算
4. 对于复杂情况，考虑使用平移变换方法