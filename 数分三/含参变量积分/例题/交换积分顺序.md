# 例题  
用交换积分顺序的方法计算下列积分  
$$ \int_{0}^{1} \sin\left(\ln \frac{1}{x}\right) \frac{x^b - x^a}{\ln x} \, dx \quad (b > a > 0) $$

# 解答  
## 方法分析  
本题的关键在于将原积分中的 $\frac{x^b - x^a}{\ln x}$ 表示为对 $y$ 的积分，即  
$$ \frac{x^b - x^a}{\ln x} = \int_a^b x^y \, dy $$  
这样原积分化为二重积分，然后交换积分顺序，先对 $x$ 积分，从而简化计算。

## 解题步骤  
### Step 1：将原积分化为二重积分  
利用恒等式  
$$ \frac{x^b - x^a}{\ln x} = \int_a^b x^y \, dy $$  
原积分可写为  
$$ \int_{0}^{1} \sin\left(\ln \frac{1}{x}\right) \left( \int_a^b x^y \, dy \right) dx = \int_a^b \left( \int_0^1 x^y \sin\left(\ln \frac{1}{x}\right) dx \right) dy $$

### Step 2：计算内层积分  
设  
$$ I(y) = \int_0^1 x^y \sin\left(\ln \frac{1}{x}\right) dx $$  
利用分部积分法，令  
$$ u = \sin\left(\ln \frac{1}{x}\right), \quad dv = x^y dx $$  
则  
$$ du = -\cos\left(\ln \frac{1}{x}\right) \cdot \frac{1}{x} dx, \quad v = \frac{x^{y+1}}{y+1} $$  
于是  
$$ I(y) = \left. \frac{x^{y+1}}{y+1} \sin\left(\ln \frac{1}{x}\right) \right|_0^1 + \frac{1}{y+1} \int_0^1 x^y \cos\left(\ln \frac{1}{x}\right) dx $$  
代入上下限，第一项为 0，得  
$$ I(y) = \frac{1}{y+1} \int_0^1 x^y \cos\left(\ln \frac{1}{x}\right) dx $$

### Step 3：再次分部积分  
对上述积分再次分部积分，令  
$$ u = \cos\left(\ln \frac{1}{x}\right), \quad dv = x^y dx $$  
则  
$$ du = \sin\left(\ln \frac{1}{x}\right) \cdot \frac{1}{x} dx, \quad v = \frac{x^{y+1}}{y+1} $$  
于是  
$$ \int_0^1 x^y \cos\left(\ln \frac{1}{x}\right) dx = \left. \frac{x^{y+1}}{y+1} \cos\left(\ln \frac{1}{x}\right) \right|_0^1 - \frac{1}{y+1} \int_0^1 x^y \sin\left(\ln \frac{1}{x}\right) dx $$  
代入上下限，第一项为 $\frac{1}{y+1}$，第二项为 $-\frac{1}{y+1} I(y)$，因此  
$$ \int_0^1 x^y \cos\left(\ln \frac{1}{x}\right) dx = \frac{1}{y+1} - \frac{1}{y+1} I(y) $$

### Step 4：解出 $I(y)$  
将 Step 3 的结果代入 Step 2 的表达式：  
$$ I(y) = \frac{1}{y+1} \left[ \frac{1}{y+1} - \frac{1}{y+1} I(y) \right] $$  
整理得  
$$ I(y) = \frac{1}{(y+1)^2} - \frac{1}{(y+1)^2} I(y) $$  
即  
$$ I(y) \left[ 1 + \frac{1}{(y+1)^2} \right] = \frac{1}{(y+1)^2} $$  
解得  
$$ I(y) = \frac{1}{1 + (y+1)^2} $$

### Step 5：代回原积分并计算  
$$ \int_{0}^{1} \sin\left(\ln \frac{1}{x}\right) \frac{x^b - x^a}{\ln x} dx = \int_a^b I(y) \, dy = \int_a^b \frac{1}{1 + (y+1)^2} \, dy $$  
利用反正切函数的积分公式，得  
$$ \int_a^b \frac{1}{1 + (y+1)^2} \, dy = \left. \arctan(y+1) \right|_a^b = \arctan(b+1) - \arctan(a+1) $$  
最终答案为  
$$ \boxed{\arctan(b+1) - \arctan(a+1)} $$

# 核心技巧  
## 积分顺序交换  
- 将 $\frac{x^b - x^a}{\ln x}$ 表示为 $\int_a^b x^y \, dy$，从而将单积分化为二重积分，交换顺序后简化计算。

## 分部积分法  
- 对含 $\sin(\ln(1/x))$ 或 $\cos(\ln(1/x))$ 的积分，通过两次分部积分建立关于 $I(y)$ 的方程，解出 $I(y)$。

# 经验总结  
1. **积分顺序交换的应用**：当被积函数含有 $\frac{f(x^b) - f(x^a)}{\ln x}$ 形式时，可考虑将其表示为对参数的积分，从而交换积分顺序。  
2. **分部积分的循环特性**：某些积分经过两次分部积分后，会重新出现原积分形式，从而可通过解方程求得积分值。  
3. **极限处理**：在分部积分中，注意 $x \to 0^+$ 和 $x \to 1^-$ 时的极限值，确保边界项为零或可计算。
